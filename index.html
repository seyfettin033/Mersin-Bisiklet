<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>TÃ¼rkiye Camii Rehberi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
body { margin:0; font-family:system-ui; background:#f5f6f7; }
header {
    padding:12px;
    text-align:center;
    background:#ffffff;
    border-bottom:1px solid #ddd;
}
header b { color:#1f7a3a; }
#map { height: calc(100vh - 60px); }

.popup-btn {
    display:block;
    margin-top:6px;
    padding:6px;
    text-align:center;
    border-radius:6px;
    font-weight:600;
    text-decoration:none;
}
.osm { background:#2e7d32; color:#fff; }
.google { background:#fbbc04; color:#000; }
</style>
</head>

<body>

<header>
ğŸ•Œ <b>TÃ¼rkiye Camii Rehberi</b><br>
<small>Ä°le tÄ±kla â†’ Ä°simsiz camiler Ã§Ä±ksÄ±n</small>
</header>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const map = L.map("map").setView([39, 35], 6);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 19
}).addTo(map);

let camiLayer = L.layerGroup().addTo(map);

/* Ä°L MERKEZLERÄ° (Ã¶rnek â€“ tÃ¼m 81 il eklenebilir) */
const iller = [
  { ad:"Konya", lat:37.8715, lon:32.4846 },
  { ad:"Ankara", lat:39.9208, lon:32.8541 },
  { ad:"Ä°stanbul", lat:41.0082, lon:28.9784 },
  { ad:"Ä°zmir", lat:38.4237, lon:27.1428 },
  { ad:"Bursa", lat:40.1950, lon:29.0600 }
];

/* Ä°l markerlarÄ± */
iller.forEach(il => {
    L.circleMarker([il.lat, il.lon], {
        radius:8,
        color:"#1f7a3a",
        fillColor:"#1f7a3a",
        fillOpacity:0.9
    })
    .addTo(map)
    .bindTooltip(il.ad)
    .on("click", () => ilYukle(il));
});

function ilYukle(il) {
    map.setView([il.lat, il.lon], 10);
    camiLayer.clearLayers();

    const query = `
    [out:json][timeout:40];
    (
      node["amenity"="place_of_worship"]["religion"="muslim"]["name"!~"."](${il.lat-0.5},${il.lon-0.5},${il.lat+0.5},${il.lon+0.5});
      way["amenity"="place_of_worship"]["religion"="muslim"]["name"!~"."](${il.lat-0.5},${il.lon-0.5},${il.lat+0.5},${il.lon+0.5});
    );
    out center;
    `;

    fetch("https://overpass-api.de/api/interpreter", {
        method:"POST",
        body:query
    })
    .then(r => r.json())
    .then(data => {
        data.elements.forEach(el => {
            const lat = el.lat || el.center.lat;
            const lon = el.lon || el.center.lon;

            const osm = `https://www.openstreetmap.org/edit?editor=id#map=19/${lat}/${lon}`;
            const google = `https://www.google.com/maps/search/cami/@${lat},${lon},19z`;

            L.circleMarker([lat, lon], {
                radius:5,
                color:"#c62828",
                fillColor:"#c62828",
                fillOpacity:0.9
            })
            .addTo(camiLayer)
            .bindPopup(`
                <b>${il.ad} â€“ Ä°simsiz Cami</b>
                <a class="popup-btn osm" href="${osm}" target="_blank">âœï¸ OSMâ€™de DÃ¼zenle</a>
                <a class="popup-btn google" href="${google}" target="_blank">ğŸ” Googleâ€™da Bak</a>
            `);
        });
    });
}
</script>

</body>
</html>