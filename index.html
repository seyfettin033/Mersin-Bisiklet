<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>TÃ¼rkiye Ä°simsiz Camiler</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet"
href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
html, body { height:100%; margin:0; }

body {
    font-family: system-ui, -apple-system;
    background:#f4f5f7;
    color:#1f2937;
}

header {
    background:#ffffff;
    padding:12px;
    border-bottom:1px solid #e5e7eb;
}

header h1 {
    margin:0;
    font-size:18px;
    color:#14532d;
    text-align:center;
}

.filters {
    display:flex;
    gap:8px;
    margin-top:10px;
}

select {
    flex:1;
    padding:8px;
    border-radius:6px;
    border:1px solid #d1d5db;
    background:#fff;
    font-size:14px;
}

#map {
    height: calc(100vh - 110px);
}

/* POPUP */
.leaflet-popup-content-wrapper {
    border-radius:10px;
}

.popup {
    font-size:14px;
    color:#1f2937;
}

.popup b {
    color:#14532d;
}

.popup a {
    display:block;
    text-align:center;
    padding:8px;
    margin-top:6px;
    border-radius:6px;
    text-decoration:none;
    font-weight:600;
    font-size:13px;
}

.osm {
    background:#166534;
    color:#ffffff;
}

.google {
    background:#fde047;
    color:#000000;
}
</style>
</head>

<body>

<header>
<h1>ğŸ•Œ TÃ¼rkiye Ä°simsiz Camiler</h1>

<div class="filters">
<select id="il">
<option value="">Ä°l seÃ§iniz</option>
<option value="Istanbul">Ä°stanbul</option>
<option value="Ankara">Ankara</option>
<option value="Izmir">Ä°zmir</option>
<option value="Konya">Konya</option>
<option value="Bursa">Bursa</option>
<option value="Antalya">Antalya</option>
<option value="Adana">Adana</option>
<option value="Gaziantep">Gaziantep</option>
<option value="Kayseri">Kayseri</option>
<option value="Samsun">Samsun</option>
</select>
</div>
</header>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
var map = L.map('map').setView([39,35],6);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom:19
}).addTo(map);

var layer = L.layerGroup().addTo(map);

var centers = {
    Istanbul:[41.01,28.97],
    Ankara:[39.93,32.86],
    Izmir:[38.42,27.14],
    Konya:[37.87,32.48],
    Bursa:[40.19,29.06],
    Antalya:[36.89,30.71],
    Adana:[37.00,35.32],
    Gaziantep:[37.07,37.38],
    Kayseri:[38.73,35.48],
    Samsun:[41.29,36.33]
};

document.getElementById("il").addEventListener("change", function(){

    var il = this.value;
    if(!il) return;

    layer.clearLayers();
    map.setView(centers[il], 10);

    var query = `
    [out:json][timeout:30];
    area["name"="${il}"]["admin_level"="4"]->.a;
    (
      node["amenity"="place_of_worship"]["religion"="muslim"]["name"!~"."](area.a);
      way["amenity"="place_of_worship"]["religion"="muslim"]["name"!~"."](area.a);
    );
    out center;
    `;

    fetch("https://overpass-api.de/api/interpreter", {
        method:"POST",
        body:query
    })
    .then(r=>r.json())
    .then(data=>{
        data.elements.forEach(el=>{
            var lat = el.lat || el.center.lat;
            var lon = el.lon || el.center.lon;

            var popup = `
            <div class="popup">
                <b>â— Ä°simsiz Cami</b>
                <a class="osm" target="_blank"
                   href="https://www.openstreetmap.org/edit?editor=id#map=19/${lat}/${lon}">
                   âœï¸ OSM'de Ä°sim Gir
                </a>
                <a class="google" target="_blank"
                   href="https://www.google.com/maps/search/cami/@${lat},${lon},19z">
                   ğŸ” Googleâ€™da Kontrol
                </a>
            </div>`;

            L.circleMarker([lat,lon],{
                radius:5,
                color:"#14532d",
                fillColor:"#22c55e",
                fillOpacity:0.85
            })
            .addTo(layer)
            .bindPopup(popup);
        });
    });
});
</script>

</body>
</html>