<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>TÃ¼rkiye Camii Rehberi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
html, body { height:100%; margin:0; }
body {
    font-family: system-ui, -apple-system;
    background:#f4f5f7;
    color:#1f2937;
}
header {
    background:#ffffff;
    padding:12px;
    border-bottom:1px solid #e5e7eb;
    text-align:center;
}
header h1 {
    margin:0;
    font-size:18px;
    color:#14532d;
}
header small {
    color:#6b7280;
}
.etiket {
    background:#ecfdf5;
    color:#065f46;
    font-size:12px;
    padding:6px;
    text-align:center;
}
.filters {
    background:#ffffff;
    padding:10px;
    border-bottom:1px solid #e5e7eb;
}
select {
    width:100%;
    padding:9px;
    font-size:14px;
    border-radius:6px;
    border:1px solid #d1d5db;
}
#sayac {
    background:#ffffff;
    padding:8px;
    text-align:center;
    font-weight:600;
    color:#14532d;
    border-bottom:1px solid #e5e7eb;
}
#map {
    height:calc(100vh - 210px);
}

/* Popup */
.popup b { color:#14532d; }
.popup a {
    display:block;
    text-align:center;
    padding:8px;
    margin-top:6px;
    border-radius:6px;
    font-weight:600;
    font-size:13px;
    text-decoration:none;
}
.osm { background:#166534; color:white; }
.google { background:#fde047; color:black; }
</style>
</head>

<body>

<header>
<h1>ğŸ•Œ TÃ¼rkiye Camii Rehberi</h1>
<small>Ä°simsiz Camiler â€“ OSM DÃ¼zeltme HaritasÄ±</small>
</header>

<div class="etiket">
Bu proje OpenStreetMap verilerinin doÄŸruluÄŸunu artÄ±rmak amacÄ±yla, tamamen toplumsal fayda iÃ§in hazÄ±rlanmÄ±ÅŸtÄ±r.
</div>

<div class="filters">
<select id="il">
<option value="">Ä°l seÃ§iniz</option>
</select>
</div>

<div id="sayac">HenÃ¼z il seÃ§ilmedi</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// 81 Ä°L MERKEZ KOORDÄ°NATLARI
const iller = {
"Adana":[37.0,35.3],"AdÄ±yaman":[37.8,38.3],"Afyonkarahisar":[38.8,30.5],
"AÄŸrÄ±":[39.7,43.0],"Amasya":[40.6,35.8],"Ankara":[39.9,32.8],
"Antalya":[36.9,30.7],"Artvin":[41.2,41.8],"AydÄ±n":[37.8,27.8],
"BalÄ±kesir":[39.6,27.9],"Bilecik":[40.1,29.9],"BingÃ¶l":[38.9,40.5],
"Bitlis":[38.4,42.1],"Bolu":[40.7,31.6],"Burdur":[37.7,30.3],
"Bursa":[40.2,29.1],"Ã‡anakkale":[40.1,26.4],"Ã‡ankÄ±rÄ±":[40.6,33.6],
"Ã‡orum":[40.6,34.9],"Denizli":[37.8,29.1],"DiyarbakÄ±r":[37.9,40.2],
"Edirne":[41.7,26.6],"ElazÄ±ÄŸ":[38.7,39.2],"Erzincan":[39.7,39.5],
"Erzurum":[39.9,41.3],"EskiÅŸehir":[39.8,30.5],
"Gaziantep":[37.1,37.4],"Giresun":[40.9,38.4],
"GÃ¼mÃ¼ÅŸhane":[40.5,39.5],"Hakkari":[37.6,43.7],
"Hatay":[36.4,36.2],"Isparta":[37.8,30.5],
"Mersin":[36.8,34.6],"Ä°stanbul":[41.0,28.9],
"Ä°zmir":[38.4,27.1],"Kars":[40.6,43.1],
"Kastamonu":[41.4,33.8],"Kayseri":[38.7,35.5],
"KÄ±rklareli":[41.7,27.2],"KÄ±rÅŸehir":[39.1,34.2],
"Kocaeli":[40.8,29.9],"Konya":[37.9,32.5],
"KÃ¼tahya":[39.4,29.9],"Malatya":[38.4,38.3],
"Manisa":[38.6,27.4],"KahramanmaraÅŸ":[37.6,36.9],
"Mardin":[37.3,40.7],"MuÄŸla":[37.2,28.4],
"MuÅŸ":[38.9,41.5],"NevÅŸehir":[38.6,34.7],
"NiÄŸde":[37.9,34.7],"Ordu":[40.9,37.9],
"Rize":[41.0,40.5],"Sakarya":[40.8,30.4],
"Samsun":[41.3,36.3],"Siirt":[37.9,41.9],
"Sinop":[42.0,35.1],"Sivas":[39.7,37.0],
"TekirdaÄŸ":[40.9,27.5],"Tokat":[40.3,36.6],
"Trabzon":[41.0,39.7],"Tunceli":[39.1,39.5],
"ÅanlÄ±urfa":[37.2,38.8],"UÅŸak":[38.7,29.4],
"Van":[38.5,43.3],"Yozgat":[39.8,34.8],
"Zonguldak":[41.4,31.8],
"Aksaray":[38.4,34.0],"Bayburt":[40.3,40.2],
"Karaman":[37.2,33.2],"KÄ±rÄ±kkale":[39.8,33.5],
"Batman":[37.9,41.1],"ÅÄ±rnak":[37.5,42.5],
"BartÄ±n":[41.6,32.3],"Ardahan":[41.1,42.7],
"IÄŸdÄ±r":[39.9,44.0],"Yalova":[40.6,29.3],
"KarabÃ¼k":[41.2,32.6],"Kilis":[36.7,37.1],
"Osmaniye":[37.1,36.2],"DÃ¼zce":[40.8,31.1]
};

// Ä°l dropdown doldur
const ilSelect = document.getElementById("il");
Object.keys(iller).forEach(il=>{
    let o=document.createElement("option");
    o.textContent=il;
    ilSelect.appendChild(o);
});

// Harita
var map = L.map('map').setView([39,35],6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);
var layer = L.layerGroup().addTo(map);

ilSelect.addEventListener("change", function(){
    let il=this.value;
    if(!il) return;

    layer.clearLayers();
    map.setView(iller[il],10);
    document.getElementById("sayac").innerText = il+" â€“ YÃ¼kleniyor...";

    let query = `
    [out:json][timeout:40];
    area["name"="${il}"]["admin_level"="4"]->.a;
    (
      node["amenity"="place_of_worship"]["religion"="muslim"]["name"!~"."](area.a);
      way["amenity"="place_of_worship"]["religion"="muslim"]["name"!~"."](area.a);
    );
    out center;
    `;

    fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:query})
    .then(r=>r.json())
    .then(d=>{
        document.getElementById("sayac").innerHTML =
        il+" â€“ <b>"+d.elements.length+"</b> isimsiz cami";

        d.elements.forEach(el=>{
            let lat=el.lat||el.center.lat;
            let lon=el.lon||el.center.lon;

            L.circleMarker([lat,lon],{
                radius:5,color:"#14532d",fillColor:"#22c55e",fillOpacity:0.85
            }).addTo(layer).bindPopup(`
                <div class="popup">
                <b>â— Ä°simsiz Cami</b>
                <a class="osm" target="_blank"
                href="https://www.openstreetmap.org/edit?editor=id#map=19/${lat}/${lon}">
                âœï¸ OSM'de Ä°sim Gir</a>
                <a class="google" target="_blank"
                href="https://www.google.com/maps/search/cami/@${lat},${lon},19z">
                ğŸ” Googleâ€™da Kontrol</a>
                </div>
            `);
        });
    });
});
</script>

</body>
</html>