<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÃ¼rkiye Camileri | Dijital Envanter</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />

    <style>
        :root { --ana-renk: #c0392b; --arka-plan: #f8f9fa; }
        body { margin: 0; display: flex; font-family: 'Segoe UI', Tahoma, sans-serif; height: 100vh; background: var(--arka-plan); }
        
        /* Sol Panel: GeliÅŸmiÅŸ Filtreleme */
        #sidebar { 
            width: 350px; background: white; border-right: 3px solid var(--ana-renk); 
            padding: 25px; box-shadow: 5px 0 20px rgba(0,0,0,0.1); z-index: 1000;
            display: flex; flex-direction: column; overflow-y: auto;
        }

        #map { flex-grow: 1; z-index: 1; }

        .brand { text-align: center; margin-bottom: 30px; }
        .brand img { width: 50px; margin-bottom: 10px; }
        .brand h1 { font-size: 20px; color: #2c3e50; margin: 0; letter-spacing: -1px; }

        .search-box { margin-bottom: 20px; }
        input, select { 
            width: 100%; padding: 12px; border-radius: 8px; border: 1.5px solid #dee2e6; 
            margin-top: 8px; font-size: 14px; transition: 0.3s;
        }
        input:focus, select:focus { border-color: var(--ana-renk); outline: none; }

        .stats-card { 
            margin-top: auto; background: #fff5f5; padding: 20px; 
            border-radius: 12px; border-left: 5px solid var(--ana-renk);
        }

        /* Harita ElemanlarÄ± */
        .btn-go { 
            display: block; background: var(--ana-renk); color: white; text-align: center; 
            padding: 10px; border-radius: 6px; text-decoration: none; margin-top: 10px; font-weight: bold;
        }
        .cluster-custom { background: var(--ana-renk); color: white; border-radius: 50%; text-align: center; font-weight: bold; }
    </style>
</head>
<body>

<div id="sidebar">
    <div class="brand">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b4/Flag_of_Turkey.svg" alt="TR">
        <h1>TÃœRKÄ°YE <span style="color:var(--ana-renk)">CAMÄ°LERÄ°</span></h1>
        <small>Dijital Envanter Sistemi</small>
    </div>

    <div class="search-box">
        <label>ğŸ” Ä°SÄ°M Ä°LE ARA</label>
        <input type="text" id="nameSearch" placeholder="Cami adÄ± yazÄ±n..." oninput="filterData()">
    </div>

    <div class="filter-box">
        <label>ğŸ“ ÅEHÄ°R SEÃ‡Ä°N</label>
        <select id="citySelect" onchange="updateDistricts()">
            <option value="">TÃ¼m TÃ¼rkiye</option>
            <option value="Mersin">Mersin</option>
            <option value="Ä°stanbul">Ä°stanbul</option>
            <option value="Ankara">Ankara</option>
        </select>
    </div>

    <div class="filter-box" style="margin-top:15px;">
        <label>ğŸ¢ Ä°LÃ‡E SEÃ‡Ä°N</label>
        <select id="districtSelect" onchange="filterData()">
            <option value="">Ã–nce Åehir SeÃ§in</option>
        </select>
    </div>

    <div class="stats-card">
        <div style="font-size: 13px; color: #666;">Toplam KayÄ±tlÄ± Eser</div>
        <div style="font-size: 24px; font-weight: bold; color: var(--ana-renk);" id="totalCount">0</div>
    </div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

<script>
    // 1. HARÄ°TA AYARLARI
    var map = L.map('map').setView([38.96, 35.24], 6);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);

    var markerCluster = L.markerClusterGroup();
    map.addLayer(markerCluster);

    // 2. KAPSAMLI VERÄ° SETÄ° (GerÃ§ek Koordinatlar)
    // Buraya binlerce veri eklenebilir.
    const allData = [
        {id: 1, city: "Mersin", district: "YeniÅŸehir", name: "Hz. MuÄŸdat Camii", lat: 36.7876, lng: 34.6198, desc: "6 minareli, Cumhuriyet dÃ¶nemi eseri."},
        {id: 2, city: "Mersin", district: "Akdeniz", name: "Mersin Ulu Cami", lat: 36.8001, lng: 34.6308, desc: "Åehir merkezinin en kÃ¶klÃ¼ camisi."},
        {id: 3, city: "Mersin", district: "Tarsus", name: "Tarsus Ulu Cami", lat: 36.9161, lng: 34.8942, desc: "1579 yapÄ±mÄ±, tarihi doku."},
        {id: 4, city: "Ä°stanbul", city: "Fatih", name: "Sultanahmet Camii", lat: 41.0054, lng: 28.9768, desc: "DÃ¼nyaca Ã¼nlÃ¼ Mavi Cami."},
        {id: 5, city: "Ankara", district: "AltÄ±ndaÄŸ", name: "HacÄ± Bayram-Ä± Veli Camii", lat: 39.9443, lng: 32.8581, desc: "Ankara'nÄ±n manevi merkezi."}
        // ... Veri seti istenildiÄŸi kadar uzatÄ±labilir
    ];

    const districts = {
        "Mersin": ["Akdeniz", "YeniÅŸehir", "Mezitli", "Toroslar", "Tarsus", "Erdemli", "Silifke", "Anamur"],
        "Ä°stanbul": ["Fatih", "ÃœskÃ¼dar", "EyÃ¼psultan", "BeÅŸiktaÅŸ"],
        "Ankara": ["AltÄ±ndaÄŸ", "Ã‡ankaya", "KeÃ§iÃ¶ren"]
    };

    // 3. FONKSÄ°YONLAR
    function updateDistricts() {
        const city = document.getElementById('citySelect').value;
        const dSelect = document.getElementById('districtSelect');
        dSelect.innerHTML = '<option value="">TÃ¼m Ä°lÃ§eler</option>';
        
        if (city && districts[city]) {
            districts[city].forEach(d => {
                dSelect.innerHTML += `<option value="${d}">${d}</option>`;
            });
            // Åehre odaklan
            const cityData = allData.filter(x => x.city === city);
            if(cityData.length > 0) map.setView([cityData[0].lat, cityData[0].lng], 12);
        }
        filterData();
    }

    function filterData() {
        markerCluster.clearLayers();
        const city = document.getElementById('citySelect').value;
        const dist = document.getElementById('districtSelect').value;
        const search = document.getElementById('nameSearch').value.toLowerCase();

        const filtered = allData.filter(item => {
            return (city === "" || item.city === city) &&
                   (dist === "" || item.district === dist) &&
                   (item.name.toLowerCase().includes(search));
        });

        filtered.forEach(item => {
            const marker = L.marker([item.lat, item.lng]);
            marker.bindPopup(`
                <div style="width:200px">
                    <strong style="color:var(--ana-renk)">${item.name}</strong><br>
                    <small>${item.city} / ${item.district}</small><hr>
                    <p style="font-size:12px">${item.desc}</p>
                    <a href="https://www.google.com/maps/dir/?api=1&destination=${item.lat},${item.lng}" target="_blank" class="btn-go">ğŸ“ Yol Tarifi</a>
                </div>
            `);
            markerCluster.addLayer(marker);
        });

        document.getElementById('totalCount').innerText = filtered.length;
    }

    // BaÅŸlangÄ±Ã§ta tÃ¼mÃ¼nÃ¼ yÃ¼kle
    filterData();
</script>

</body>
</html>

