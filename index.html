<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>TÃ¼rkiye Camii Rehberi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
html, body {
    height: 100%;
    margin: 0;
}

body {
    font-family: system-ui, -apple-system;
    background: #f4f5f7;
    color: #1f2937;
}

header {
    background: #ffffff;
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
}

header h1 {
    margin: 0;
    font-size: 18px;
    color: #14532d;
    text-align: center;
}

header small {
    display: block;
    text-align: center;
    color: #6b7280;
}

.etiket {
    background: #ecfdf5;
    color: #065f46;
    text-align: center;
    font-size: 12px;
    padding: 6px;
    border-bottom: 1px solid #d1fae5;
}

.filters {
    padding: 10px;
    background: #ffffff;
    border-bottom: 1px solid #e5e7eb;
}

select {
    width: 100%;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #d1d5db;
    font-size: 14px;
}

#sayac {
    background: #ffffff;
    padding: 10px;
    text-align: center;
    font-size: 14px;
    font-weight: 600;
    color: #14532d;
    border-bottom: 1px solid #e5e7eb;
}

#map {
    height: calc(100vh - 210px);
}

/* Popup */
.popup {
    font-size: 14px;
}

.popup b {
    color: #14532d;
}

.popup a {
    display: block;
    text-align: center;
    padding: 8px;
    margin-top: 6px;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
    font-size: 13px;
}

.osm {
    background: #166534;
    color: #ffffff;
}

.google {
    background: #fde047;
    color: #000000;
}
</style>
</head>

<body>

<header>
<h1>ğŸ•Œ TÃ¼rkiye Camii Rehberi</h1>
<small>Ä°simsiz Camiler â€“ OSM DÃ¼zeltme HaritasÄ±</small>
</header>

<div class="etiket">
â„¹ï¸ Bu proje OpenStreetMap verilerinin doÄŸruluÄŸunu artÄ±rmak amacÄ±yla, tamamen toplumsal fayda iÃ§in hazÄ±rlanmÄ±ÅŸtÄ±r.
</div>

<div class="filters">
<select id="il">
<option value="">Ä°l seÃ§iniz</option>
<option>Adana</option><option>AdÄ±yaman</option><option>Afyonkarahisar</option>
<option>AÄŸrÄ±</option><option>Amasya</option><option>Ankara</option>
<option>Antalya</option><option>Artvin</option><option>AydÄ±n</option>
<option>BalÄ±kesir</option><option>Bilecik</option><option>BingÃ¶l</option>
<option>Bitlis</option><option>Bolu</option><option>Burdur</option>
<option>Bursa</option><option>Ã‡anakkale</option><option>Ã‡ankÄ±rÄ±</option>
<option>Ã‡orum</option><option>Denizli</option><option>DiyarbakÄ±r</option>
<option>Edirne</option><option>ElazÄ±ÄŸ</option><option>Erzincan</option>
<option>Erzurum</option><option>EskiÅŸehir</option><option>Gaziantep</option>
<option>Giresun</option><option>GÃ¼mÃ¼ÅŸhane</option><option>Hakkari</option>
<option>Hatay</option><option>Isparta</option><option>Mersin</option>
<option>Ä°stanbul</option><option>Ä°zmir</option><option>Kars</option>
<option>Kastamonu</option><option>Kayseri</option><option>KÄ±rklareli</option>
<option>KÄ±rÅŸehir</option><option>Kocaeli</option><option>Konya</option>
<option>KÃ¼tahya</option><option>Malatya</option><option>Manisa</option>
<option>KahramanmaraÅŸ</option><option>Mardin</option><option>MuÄŸla</option>
<option>MuÅŸ</option><option>NevÅŸehir</option><option>NiÄŸde</option>
<option>Ordu</option><option>Rize</option><option>Sakarya</option>
<option>Samsun</option><option>Siirt</option><option>Sinop</option>
<option>Sivas</option><option>TekirdaÄŸ</option><option>Tokat</option>
<option>Trabzon</option><option>Tunceli</option><option>ÅanlÄ±urfa</option>
<option>UÅŸak</option><option>Van</option><option>Yozgat</option>
<option>Zonguldak</option><option>Aksaray</option><option>Bayburt</option>
<option>Karaman</option><option>KÄ±rÄ±kkale</option>
<option>Batman</option><option>ÅÄ±rnak</option><option>BartÄ±n</option>
<option>Ardahan</option><option>IÄŸdÄ±r</option><option>Yalova</option>
<option>KarabÃ¼k</option><option>Kilis</option><option>Osmaniye</option>
<option>DÃ¼zce</option>
</select>
</div>

<div id="sayac">HenÃ¼z il seÃ§ilmedi</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
var map = L.map('map').setView([39, 35], 6);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
}).addTo(map);

var layer = L.layerGroup().addTo(map);

document.getElementById("il").addEventListener("change", function () {

    var il = this.value;
    if (!il) return;

    layer.clearLayers();
    document.getElementById("sayac").innerHTML = il + " â€“ YÃ¼kleniyor...";

    var query = `
    [out:json][timeout:40];
    area["name"="${il}"]["admin_level"="4"]->.a;
    (
      node["amenity"="place_of_worship"]["religion"="muslim"]["name"!~"."](area.a);
      way["amenity"="place_of_worship"]["religion"="muslim"]["name"!~"."](area.a);
    );
    out center;
    `;

    fetch("https://overpass-api.de/api/interpreter", {
        method: "POST",
        body: query
    })
    .then(r => r.json())
    .then(data => {

        var adet = data.elements.length;
        var sayac = document.getElementById("sayac");

        if (adet === 0) {
            sayac.innerHTML = il + " â€“ Ä°simsiz cami bulunamadÄ±";
            return;
        } else {
            sayac.innerHTML = il + " â€“ <b>" + adet + "</b> isimsiz cami bulundu";
        }

        data.elements.forEach(el => {

            var lat = el.lat || el.center.lat;
            var lon = el.lon || el.center.lon;

            var popup = `
            <div class="popup">
                <b>â— Ä°simsiz Cami</b>
                <a class="osm" target="_blank"
                   href="https://www.openstreetmap.org/edit?editor=id#map=19/${lat}/${lon}">
                   âœï¸ OSM'de Ä°sim Gir
                </a>
                <a class="google" target="_blank"
                   href="https://www.google.com/maps/search/cami/@${lat},${lon},19z">
                   ğŸ” Googleâ€™da Kontrol
                </a>
            </div>`;

            L.circleMarker([lat, lon], {
                radius: 5,
                color: "#14532d",
                fillColor: "#22c55e",
                fillOpacity: 0.85
            })
            .addTo(layer)
            .bindPopup(popup);
        });
    });
});
</script>

</body>
</html>